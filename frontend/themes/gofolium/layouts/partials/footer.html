<footer class="py-5">
  <div class="container">
    <div class="row">
      <div class="col-12 text-center">
        <ul class="list-inline social-icons mb-5">
          {{ range .Site.Params.social }}
          <li class="list-inline-item"><a href="{{ .link | safeURL }}"><i class="{{.icon}}"></i></a></li>
          {{ end }}
        </ul>
        <hr class="mx-auto border-default" style="width: 90px;">
        <p class="mt-5">{{ .Site.Params.copyright | markdownify }}</p>
      </div>
    </div>
  </div>
</footer>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const counterEndpoint = "{{ .Site.Params.visitor_counter_endpoint }}";
    if (counterEndpoint && !counterEndpoint.includes("<your-function-app>")) {
      fetch(counterEndpoint)
        .then(response => response.json())
        .then(data => {
          if (data && data.count) {
            document.getElementById('visitor-count').innerText = data.count;
          } else {
            console.error('Invalid visitor count data:', data);
            document.getElementById('visitor-count').innerText = "Error";
          }
        })
        .catch(error => {
          console.error('Error fetching visitor count:', error);
          document.getElementById('visitor-count').innerText = "Unavailable";
        });
    } else {
      document.getElementById('visitor-count').innerText = "Not Configured";
    }
  });
</script>


{{ "<!-- JS Plugins -->" | safeHTML }}
{{ range .Site.Params.plugins.js}}
<script src="{{ .link | absURL }}"></script>
{{ end }}

{{ "<!-- Main Script -->" | safeHTML }}
{{ $script := resources.Get "js/script.js" | minify }}
<script src="{{ $script.Permalink }}"></script>

{{ "<!-- google analitycs -->" | safeHTML }}
{{ with .Site.Params.google_analitycs_id}}
<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
  ga('create', '{{ . }}', 'auto');
  ga('send', 'pageview');
</script>
{{ end }}